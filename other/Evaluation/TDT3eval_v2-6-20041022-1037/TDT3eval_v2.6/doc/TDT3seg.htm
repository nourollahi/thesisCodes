e<!-- $Id: TDT3seg.htm,v 1.2 2001/10/15 12:11:51 jon Exp $ -->
<HTML>
<HEAD>
<CENTER><TITLE>TDT3seg.pl User Manual</TITLE></CENTER>
<A NAME="TDT3seg.pl"> <B><BIG><CENTER>TDT3seg.pl User Manual</CENTER></BIG></B></A>

<BR>
<CENTER> <H1> TDT3 Segmentation Task Scoring </H1> </CENTER>

</HEAD>

<BODY><p><hr>


<H1>Usage:</H1>
<DIR>
	TDT3seg.pl -R Rootdir -I 
	<A HREF="TDT3seg.htm#SegIndexFormat"> TDT3_seg_index</A> &lt;Options&gt; 
	<A HREF="TDT3seg.htm#SegOutputFormat"> Seg_system_output</A>
</DIR>

<P>The 'TDT3seg.pl' program will score the output generated by a TDT3
segmentation system.  The program requires the directory path,
'Rootdir', to the LDC's TDT3 Test corpus.  The corpus must be in the
same structure as released by the LDC, with all file formats identical
to their original form.  The program uses the index file <A HREF="TDT3seg.htm#SegIndexFormat"> TDT3_seg_index</A>,
provide with the test corpus and described below, to load the
appropriate data from the corpus and to verify the completeness of the
<A HREF="TDT3seg.htm#SegOutputFormat"> Seg_system_output</A> file.

<P> Upon completion of the load, the segmentations are scored, and a
report is generated.  Segmentation scoring function is fully
described in <A HREF="tdt3_plan.ps"> The Topic Detection and Tracking
(TDT3) Evaluation Plan</a> <A HREF="tdt3_plan.doc">(In Microsoft Word)</a>.  This version if TDT3seg.pl implements the
scoring protocols described in the pointed to version of the
eval plan.

<P> The scoring of Mandarin ASR segmentation involves extra processing
by the evaluation script.  The RECIDs in the Mandarin ASR files
correspond to words, whereas evaluation of story segmentation of Mandarin is
defined in terms of characters.  Thus, for this condition, the
evaluation script reads in the tokenized text file, converting RECIDS
to character offsets.

<P> The following &lt;Options&gt; are recognized by the program:

<DIR>
<TABLE BORDER=2> 
<TR> <TD> -C Cmiss:Cfa <TD> -> <TD> Set the cost of a missed detection and the cost of a
	false alarm to 'Cmiss' and 'Cfa' respectively.  These numbers are used in the 
	segmentation cost function.  Default values are Cmiss=1.0 and Cfa=0.3 ;
<TR> <TD> -d <TD> ->     <TD> print the loaded database and exit
<TR> <TD> -D Detail <TD> -> <TD> Write internally organize evaluation corpus and pertinent 
			statistics for debugging purposes.  This report, though voluminous, is
			intended to help researchers debug their internal versions of
			evaluation code.
<TR> <TD> -E <A HREF="ssd.htm">SubsetFile</A> <TD> -> <TD> Compute performance excluding source files in the subset definition file.  NOTE: Only the first set defined in the subset definition file is used for the filter.  All others are ignored. 
<tr> <TD> -f size <TD> -> <TD> Set the evaluation frame size to 'size'.  The
	defaults are 50 RECIDS, (75 RECIDS for Mandarin) and 15 second TIME scoring.
<tr> <TD> -i      <TD> -> <TD>

	 Include all bounded regions of text in scoring.  By default, 
	 evaluation frames within stories not marked as NEWS are not
	 tallied to calculate performance.
<TR> <TD> -L <TD> -> <TD> Print the loaded TDT database and exit.
<TR> <TD> -p <TD> -> <TD> Print out precision and recall performance statistics.  The analysis will only be printed IFF the evaluation frame size is set to 1.
<TR> <TD> -P P(seg) <TD> -> <TD> Use P(seg) for the segmentation cost function.
	 Default is 0.3.
<TR> <TD> -v num <TD> -> <TD> Set the verbose level to 'num'. Default 1.<BR>
	                   ==0 None, ==1 Normal, >5 Slight, >10 way too much, >15 not even funny
<TR> <TD> -r Report <TD> -> <TD> Write the summary report to 'Report' rather than STDOUT, the default.
<TR> <TD> -s <TD> -> <TD> Use all available speedups.  Currently, the only speedups involve 
			  NOT using 'nsmgls' and 'SGMLS.pm' parser and PERL libraries to read 
			  the TDT3 Corpus files. 

<TR> <TD COLSPAN=3> <b><center>Options that apply to the DET plots:</center></b>
<TR> <TD> -d DETfile <TD> -> <TD> Create a DET plot in GNUplot format with the file
	root 'DETfile'.  The program makes several files each with additional extensions.
	The file 'DETfile'.plt is a command file for GNUplot and can be printed using the
	command "gnuplot 'DETfile'.plt | lpr".
<TR> <TD> -t title <TD> -> <TD> Set the title line for the plot to 'title'.
</TABLE>
</DIR>

<A NAME="SegIndexFormat"> <H2> Segmentation Task Index File Format </H2> </A>

The index file for the segmentation file is as follows.  The first
line in the index file is a header line.  The line indicates the TDT3
task, 'SEGMENTATION' in this case, and the type of pointer used to
mark segment changes.  Each subsequent data record in the file will
identify source file to process. These records will have only field
and be separated with a newline.

<P> The BNF structure of the segmentation index file is:
	
<DIR>
	&lt;HEADER_LINE&gt; <BR>
	&lt;SOURCE&gt;	<BR>
	&lt;SOURCE&gt;	<BR>
	...
	<P>	

Where:
	<DIR>
	<TABLE BORDER=2>
	<TR> <TD> &lt;HEADER_LINE&gt;   <TD> :== 
		<TD> <B> # SEGMENTATION &lt;POINTER_TYPE&gt; SRC=&lt;SRC_COND&gt; TEST:SL=&lt;LANG&gt; TEST:CL=&lt;C_LANG&gt;</B>
	<TR> <TD> <DIR>  &lt;POINTER_TYPE&gt; </DIR>  <TD> :== <TD> <B> RECID | TIME </B> <BR>
		A POINTER_TYPE is the type of boundaries to be output by the
		system. The possible values are RECID for text stream
		segmentation or TIME for audio segmentation.
	<TR> <TD> <DIR>  &lt;SRC_COND&gt; </DIR> <TD> :== <TD> <b> bnasr | bnman </b> <br>
	        The source condition used to build the index file.  The only source defined by
		the evaluation spec iw broadcast new ASR or manual transcripts.	
	<TR> <TD> <DIR>  &lt;S_LANG&gt; </DIR>   <TD> :== <TD> <b> eng | man | mul </b> <br>
	        The source language of the broadcast source.
	<TR> <TD> <DIR>  &lt;C_LANG&gt; </DIR>   <TD> :== <TD> <b> nat | eng </b> <br>
	        The language in which the content has been transcribed and/or converted to.
	<TR> <TD> &lt;SOURCE&gt; <TD> :== <TD> TDT3 corpus filename with
			directory and extension names relative to the TDT3
			root directory specified on the command line.
	</TABLE>
	</DIR>

</DIR>

The following is an excerpt from a segmentation task index file.

<DIR>
<pre>
# SEGMENTATION RECID SRC=bnasr TEST:SL=eng TEST:CL=nat
#
# Generated: on Wed Jul 15 11:44:27 EDT 1998
#    by command '/da2/TDT/TDT3eval_v0.2/TDT3BuildIndex.pl 
#                -R /da1/LDC_transcript_data/TDT/tdt_deliv_980708
#                -f indexes_devtest/flist.devtest 
#                -O indexes_devtest -a ccap'
#
tkntext/19980301_0553_0719_APW_ENG.tkn
tkntext/19980301_1014_1116_APW_ENG.tkn
tkntext/19980301_1403_1529_APW_ENG.tkn
</pre>
</DIR>

<A NAME="SegOutputFormat"><H2> Segmentation Task System Output Format </H2></A>


Segmentation systems under evaluation must record segmentation
decisions in an output file, one record for each hypothesized story
boundary. The first record in this file is a header record and will
contain three fields which specify information that applies globally
to the whole file.  Each subsequent data record in the file will
identify a hypothesized boundary. These records will have two fields
indicating the source file, (copied from the index file), and point at
which a segment boundary occurs.

Comment lines begin with the '#' character, and any text following a
'#' is ignored.  The exception to this rule is the first comment line
can optionally contain a long description of the system under test.  This
description will be included in the scoring report along side the
&lt;SYSTEM&gt; value described below.  Blank lines after the initial comment
line will be ignored.

<P> The BNF structure of the segmentation system output file is:
	
<DIR>
	&lt;SYSTEM&gt; &lt;DEF_PERIOD&gt; &lt;POINTER_TYPE&gt; <BR>
	&lt;SOURCE&gt; &lt;BOUNDARY&gt; <BR>
	&lt;SOURCE&gt; &lt;BOUNDARY&gt; <BR>
	...
	<P>	

Where:
	<DIR>
	<TABLE BORDER=2>
	<TR> <TD> &lt;SYSTEM&gt; <TD> :== <TD> System is an alphanumeric
			character string that uniquely identifies the
			system being tested. (E.g., CDM_P05-8.v37)

	<TR> <TD> &lt;DEF_PERIOD&gt;   <TD> :== <TD> The deferral period before
						before decisions are made.
						Permissible values defined by
						the TDT3 test specification.
	<TR> <TD> &lt;POINTER_TYPE&gt; <TD> :== <TD> <B> RECID | TIME </B> <BR>
		POINTER_TYPE is the type of boundaries to be output by
		the system. The possible values are RECID for text
		stream segmentation or TIME for audio segmentation.

	<TR>
	<TR> <TD> &lt;SOURCE&gt; <TD> :== <TD> TDT3 corpus filename with
			directory and extension names relative to the TDT3
			root directory specified on the command line.

	<TR> <TD> &lt;BOUNDARY&gt; <TD> :== <TD> Boundary is a
		hypothesized boundary. For text files, Boundary is the
		index number of the first word in the hypothesized
		segment, in the range {1, 2, . . .}. For audio files,
		Boundary is the time of the beginning of the segment
		{0.0, . . .}. (It isn't necessary to output the
		beginning of the first segment.) The hypothesized
		Boundary points must occur in chronological order.

	</TABLE>
	</DIR>


</DIR>

The following is an excerpt from a segmentation system output file.

<DIR>
<pre>
# Degenerate segmentation results, Correct, RECID
100Correct 100 RECID
tkntext/19980301_0553_0719_APW_ENG.tkn 1
tkntext/19980301_0553_0719_APW_ENG.tkn 167
tkntext/19980301_0553_0719_APW_ENG.tkn 690
tkntext/19980301_0553_0719_APW_ENG.tkn 1047
tkntext/19980301_0553_0719_APW_ENG.tkn 1198
tkntext/19980301_0553_0719_APW_ENG.tkn 1619
</pre>
</DIR>

<H2> Example Output Report </H2>

<DIR>
<PRE>
-------------------------------------------------------------------------------
------------------  TDT Segmentation Task Performance Report  -----------------


LDC TDT Corpus Root Dir: ../../..
Index File:              ../indexes_devtest/seg_man.ndx
System Output File:      seg_man.seg
Omit Non-NEWS stories:   FALSE
Pointer Type:            RECID
Deferral Period:         100
Evaluation Frame Size:   50

Segmentation Performance Calculations:
    System Identifier:   Errors 'Degenerate segmentation results, With errors, RECID'
    Number Source Files:  381


    P(miss) = ( 1905 / 517319 ) = 0.003682 
    P(fa)   = ( 1905 / 1237223 ) = 0.001540

--------------- End of TDT Segmentation Task Performance Report  --------------
-------------------------------------------------------------------------------
</PRE>
</DIR>


</BODY>
</HTML>

